version: 2
models:
  - name: int_classroom_surveys_delhi
    description: Add survey form data
    +schema: intermediate
    columns:
      - name: submissiondate
        description: Submission date
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: timestamp with time zone
      - name: region
        description: Geographical region
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: text

  - name: int_classroom_surveys_ethiopia
    description: Add survey form data
    +schema: intermediate
    columns:
      - name: submissiondate
        description: Submission date
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: timestamp with time zone

  - name: int_classroom_surveys_tamil_nadu
    description: Add survey form data
    +schema: intermediate
    columns:
      - name: submissiondate
        description: Submission date
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: timestamp with time zone
      - name: region
        description: Region
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: text

  - name: int_classroom_surveys_karnataka
    description: Add survey form data
    +schema: intermediate
    columns:
      - name: submissiondate
        description: Submission date
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: timestamp with time zone
      - name: region
        description: region
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: text

  - name: int_classroom_surveys_indonesia
    description: Add survey form data
    +schema: intermediate
    columns:
      - name: submissiondate
        description: Submission date
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: timestamp with time zone
      - name: region
        description: region
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: text

  - name: int_classroom_surveys_uganda
    description: Add survey form data
    +schema: intermediate
    columns:
      - name: submissiondate
        description: Submission date
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: timestamp with time zone
      - name: region
        description: region
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: text

  - name: indonesia_normalized
    description: |
      Normalized Indonesia data (SurveyCTO + Kobo) with deduplication.
      This model ensures NO duplicates in the dev_intermediate database.
      Downstream tables may have repeated KEY values (e.g., one KEY per subindicator),
      which is expected for data processing needs.
    +schema: intermediate
    columns:
      - name: '"KEY"'
        description: Primary key - must be unique and not null/blank in this intermediate table
        tests:
          - not_null
          - unique
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: string

  - name: uganda_normalized
    description: |
      Normalized Uganda data (SurveyCTO + Kobo) with deduplication.
      This model ensures NO duplicates in the dev_intermediate database.
      Downstream tables may have repeated KEY values (e.g., one KEY per subindicator),
      which is expected for data processing needs.
    +schema: intermediate
    columns:
      - name: '"KEY"'
        description: Primary key - must be unique and not null/blank in this intermediate table
        tests:
          - not_null
          - unique
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: string
